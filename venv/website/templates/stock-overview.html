{% extends "base.html" %}
{% block title %} Stock Overview {% endblock %}

{% block content %}
<br />
<div class="container-fluid">
<!--    HEAD    -->
    <div class="row mb-4 font-weight-bold" align="center">
        <div class="col-md-10" align="center" style="font-size: 24px;">{{symbol}}
            <span style="font-size: 16px;">{{stock_info['currentPrice']}} $</span>
        </div>
        <div class="col-md-2" align="right">
            <a class="btn btn-primary" href="/{{symbol}}/calculations">Calculations</a>
        </div>

    </div>
    <br />
    <form method="get" action="">
        <!--  buttons between statements  -->
        <div class="row mb-4 mt-4" align="center">
            <div class="col-2">
                <button class="btn btn-info text-left" type="submit" id="income_statement" name="selected_statement" value="income">Income Statement</button>
            </div>
            <div class="col-2">
                <button class="btn btn-info text-left" type="submit" id="balance_sheet" name="selected_statement" value="balance">Balance Sheet</button>
            </div>
            <div class="col-2">
                <button class="btn btn-info text-left" type="submit" id="cash_flow" name="selected_statement" value="cash">Cash Flow</button>
            </div>
            <div class="col-2">
                <button class="btn btn-primary text-right" type="submit" id="stats" name="selected_statement" value="stats">Statistics</button>
            </div>
        </div>
            <!--  buttons between annual/quarterly  -->
        {% if not stats %}
        <div class="row mb-4">
            <div class="col-md-1">
                <button class="btn btn-secondary" type="submit" id="annual" name="selected_period" value="annual"> Annual </button>
            </div>
            <div class="col-md-1">
                <button class="btn btn-secondary" type="submit" id="quarterly" name="selected_period" value="quarterly"> Quarterly </button>
            </div>
        </div>
        {% endif %}
            <input type="hidden" name="selected_statement" value="{{ request.args.get('selected_statement', 'income') }}">
            <input type="hidden" name="selected_period" value="{{ request.args.get('selected_period', 'annual') }}">
    </form>

<!--    Period    -->
<div class="row mb-4">
    <div class="container mb-4" id="data_display">
        <div class="row font-weight-bold mb-4" align="left" >
            {% if periods %}
                <div class="col"></div>
                {% for period in periods %}
                        <div class="col"> {{period.date()}} </div>
                {% endfor %}
            {% endif %}
        </div>

        <!--  parameters and values  -->


    {% if selected_statement == 'income' %}

        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Revenue </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['TotalRevenue']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Cost Of Revenue </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['CostOfRevenue']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Gross Profit </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['GrossProfit']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> EBITDA </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['NormalizedEBITDA']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Operating Expenses </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['OperatingExpense']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Net Income/Earnings </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['NetIncome']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Operating Income </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['OperatingIncome']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> EPS </div>
        </div>

    {% elif selected_statement == 'balance' %}

        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Total Assets </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['TotalAssets']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Current Assets </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['CurrentAssets']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Total Cash </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['CashAndCashEquivalents']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Non Current Assets </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['TotalNonCurrentAssets']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Total Liabilities </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['TotalLiabilitiesNetMinorityInterest']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Current Liabilities </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['CurrentLiabilities']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Long Term Debt </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['LongTermDebt']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Non Current Liabilities </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['TotalNonCurrentLiabilitiesNetMinorityInterest']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Stock issued </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['ShareIssued']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Shares Outstanding </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['OrdinarySharesNumber']/1000 }}</div>
            {% endfor %}
        </div>

    {% elif selected_statement == 'cash' %}

        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Cash From Operating Activities </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['OperatingCashFlow']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Net Income </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['NetIncomeFromContinuingOperations']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Cash From Investing Activities </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['InvestingCashFlow']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Cash From financing Activities </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['FinancingCashFlow']/1000 }}</div>
            {% endfor %}
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Free Cash Flow </div>
            {% for period in periods %}
                <div class="col">{{ statement[period]['FreeCashFlow']/1000 }}</div>
            {% endfor %}
        </div>

    {% elif selected_statement == 'stats' %}
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Industry </div>
            <div class="col">{{ stock_info['industry'] }}</div>

            <div class="col-sm font-weight-bold"> Trailing Eps  </div>
            <div class="col">{{ stock_info['trailingEps'] | round(1) }}</div>
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Sector </div>
            <div class="col">{{ stock_info['sector'] }}</div>

            <div class="col-sm font-weight-bold"> Forward Eps  </div>
            <div class="col">{{ stock_info['forwardEps'] | round(1) }}</div>
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Market Cap  </div>
            <div class="col">{{ stock_info['marketCap']/1000 }}</div>

            <div class="col-sm font-weight-bold"> PEG  </div>
            <div class="col">{{ stock_info['pegRatio'] | round(1) }}</div>
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Enterprise Value  </div>
            <div class="col">{{ stock_info['enterpriseValue']/1000 }}</div>

            <div class="col-sm font-weight-bold"> ROA  </div>
            <div class="col">{{ (stock_info['returnOnAssets']*100) | round(1) }}</div>
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Beta </div>
            <div class="col">{{ stock_info['beta'] | round(1) }}</div>

            <div class="col-sm font-weight-bold"> ROE  </div>
            <div class="col">{{ (stock_info['returnOnEquity']*100) | round(1) }}</div>
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Trailing PE </div>
            <div class="col">{{ stock_info['trailingPE'] | round(1) }}</div>

            <div class="col-sm font-weight-bold"> Gross Margins  </div>
            <div class="col">{{ (stock_info['grossMargins']*100) | round(1) }}</div>
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Forward PE </div>
            <div class="col">{{ stock_info['forwardPE'] | round(1) }}</div>

            <div class="col-sm font-weight-bold"> Ebitda Margins  </div>
            <div class="col">{{ (stock_info['ebitdaMargins']*100) | round(1) }}</div>
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> Shares Outstanding  </div>
            <div class="col">{{ stock_info['sharesOutstanding']/1000 }}</div>

            <div class="col-sm font-weight-bold"> Operating Margins  </div>
            <div class="col">{{ (stock_info['operatingMargins']*100) | round(1) }}</div>
        </div>
        <div class="row mb-4">
            <div class="col-sm font-weight-bold"> P/B  </div>
            <div class="col">{{ stock_info['priceToBook'] | round(1) }}</div>

            <div class="col-sm font-weight-bold"> Net Margins  </div>
            <div class="col">{{ (stock_info['profitMargins']*100) | round(1) }}</div>
        </div>


    {% endif %}
</div>
    {% if selected_statement == 'stats' %}
    <div class="row mb-4 font-weight-bold" align="center">
        <div class="col" align="center">{{stock_info['longBusinessSummary']}}
        </div>
    </div>
    {% endif %}

</div>
</div>


{% endblock %}